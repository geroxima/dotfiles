# ========
#   Hyprland config file for my "diinki aero" rice. Hyprland is the right tool for the job due to all of its available
#   window effects, but you could achieve 99% of the same design with swayfx as well; I just chose hyprland due to
#   compatability issues with nvidia GPU.
# ========


#                                    !!MONITORS!!                                   #
# --------------------------------------------------------------------------------- #
#                                    !!MONITORS!!                                   #

# Make sure to customize monitors! This is just my setup so you get an idea.
# run `hyprctl monitors all` to see all your monitors!!!
# monitor=eDP-1, 1920x1080@60.02000, 0x0, 1
# monitor=HDMI-A-2, 1920x1080@61.01000, 1920x0, 1

monitor=eDP-1, 1920x1080@60.02000, 0x0, 1, mirror, HDMI-A-2
monitor=HDMI-A-2, 1920x1080@61.01000, 0x0, 1


#xwayland {
#  force_zero_scaling = false
#}
# toolkit-specific scale
#env = GDK_SCALE,1
#env = XCURSOR_SIZE,32

# default workspace setup. Customize! You can choose if you want to have specific workspaces per monitor.
workspace = 1 monitor:DP-3n
workspace = 2 monitor:DP-3
workspace = 3 monitor:DP-3

workspace = 4 monitor:DP-1
workspace = 5 monitor:DP-1
workspace = 6 monitor:DP-1


# Startup programs, these are mine, most likely you'll have these as well.
exec-once = nm-applet
exec-once = hyprpaper
exec-once = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
exec-once = waybar
exec-once = wl-gammarelay
exec-once = /home/geroshima/scripts/window-sharing.sh
exec-once = /home/geroshima/scripts/battery-notify.sh
# exec-once = "~/.config/eww/scripts/start.sh"
exec-once=waypaper --restore
exec-once = wl-clip-persist --clipboard regular

ecosystem {
	no_update_news=true
}

# Default programs, these are what I prefer.
$terminal = kitty
$fileManager = nautilus
$menu = wofi --show drun
$browser = /opt/zen/zen
# Environment variables
env = XCURSOR_SIZE,24
env = HYPRCURSOR_SIZE,24



#                                    !!INPUT!!                                      #
# --------------------------------------------------------------------------------- #
#                                    !!INPUT!!                                      #

# READ https://wiki.hyprland.org/Configuring/Variables/#input IF CONFUSED!
# Example keyboard/mouse input settings.
input {
    # English, Swedish, and Spanish keyboard layout example,
    # Switch layout with pressing: alt + shift
    kb_layout = us

    # Set as needed
    kb_rules =
    kb_variant =  altgr-intl
    kb_model =
    #kb_options= caps:swapescape
    follow_mouse = 1

    # Range is -1.0 to 1.0 | 0 means no modification to sensitivity.
    sensitivity = 0

    touchpad {
        natural_scroll = true
    }
}

# This fixes a few bugs.
cursor {
  no_hardware_cursors = true
}

# PLUGINS

plugin {
    hyprbars {
        # example config
        bar_height = 20

        # example buttons (R -> L)
        # hyprbars-button = color, size, on-click
        hyprbars-button = rgb(ff4040), 10, 󰖭, hyprctl dispatch killactive
        hyprbars-button = rgb(eeee11), 10, , hyprctl dispatch fullscreen 1

        # cmd to run on double click of the bar
        on_double_click = hyprctl dispatch fullscreen 1
    }
}

#                                    !!DESIGN!!                                     #
# --------------------------------------------------------------------------------- #
#                                    !!DESIGN!!                                     #

# I prefer quick animations, that's what this setup is.

# ----------------------------------------------------- 
# ▄▀█ █▄░█ █ █▀▄▀█ ▄▀█ ▀█▀ █ █▀█ █▄░█
# █▀█ █░▀█ █ █░▀░█ █▀█ ░█░ █ █▄█ █░▀█
#
# name "End4"
# credit https://github.com/end-4/dots-hyprland
# ----------------------------------------------------- 

animations {
    enabled = true
    # Animation curves
    
    bezier = linear, 0, 0, 1, 1
    bezier = md3_standard, 0.2, 0, 0, 1
    bezier = md3_decel, 0.05, 0.7, 0.1, 1
    bezier = md3_accel, 0.3, 0, 0.8, 0.15
    bezier = overshot, 0.05, 0.9, 0.1, 1.1
    bezier = crazyshot, 0.1, 1.5, 0.76, 0.92 
    bezier = hyprnostretch, 0.05, 0.9, 0.1, 1.0
    bezier = menu_decel, 0.1, 1, 0, 1
    bezier = menu_accel, 0.38, 0.04, 1, 0.07
    bezier = easeInOutCirc, 0.85, 0, 0.15, 1
    bezier = easeOutCirc, 0, 0.55, 0.45, 1
    bezier = easeOutExpo, 0.16, 1, 0.3, 1
    bezier = softAcDecel, 0.26, 0.26, 0.15, 1
    bezier = md2, 0.4, 0, 0.2, 1 # use with .2s duration
    # Animation configs
    animation = windows, 1, 3, md3_decel, popin 60%
    animation = windowsIn, 1, 3, md3_decel, popin 60%
    animation = windowsOut, 1, 3, md3_accel, popin 60%
    animation = border, 1, 10, default
    animation = fade, 1, 3, md3_decel
    # animation = layers, 1, 2, md3_decel, slide
    animation = layersIn, 1, 3, menu_decel, slide
    animation = layersOut, 1, 1.6, menu_accel
    animation = fadeLayersIn, 1, 2, menu_decel
    animation = fadeLayersOut, 1, 4.5, menu_accel
    animation = workspaces, 1, 7, menu_decel, slide
    # animation = workspaces, 1, 2.5, softAcDecel, slide
    # animation = workspaces, 1, 7, menu_decel, slidefade 15%
    # animation = specialWorkspace, 1, 3, md3_decel, slidefadevert 15%
    animation = specialWorkspace, 1, 3, md3_decel, slidevert
}
# proportional to the taskbar values.
# proportional to the taskbar values.
general {
    # Inner and Outer gaps between windows.
    gaps_in = 5
    gaps_out = 8

    # I prefer a thin border
    border_size = 1

    # Border colors.
    col.active_border = rgba(255,255,255,1.0) 
    col.inactive_border = rgba(200,200,200,0.5) 

    # Set to true enable resizing windows by clicking and dragging on borders and gaps
    resize_on_border = true

    layout = master

    # READ https://wiki.hyprland.org/Configuring/Tearing/ BEFORE TURNING ON!
    allow_tearing = false
}

# Window Decorations! Shadow, Blur, etc.
decoration {
    # 8px same as taskbar, change if wanted.
    # rounding = 5

    dim_inactive = false
    dim_strength = 0.3

    # I want transparancy to not change, since we have the colored border.
    active_opacity = 1
    inactive_opacity = 1

    # Window Shadow
  shadow {
        enabled = true
        range = 4
        render_power = 3
        color = rgba(1a1a1aee)
  }

  # Transparent Window Blur
  blur {
        enabled = true
        size = 10
        passes = 3
        popups = true
        ignore_opacity = true

        # resets hyrpland defaults
        noise  = 0.0
        contrast = 0.7
        brightness = 0.4
        vibrancy = 0.3
        vibrancy_darkness = 0.3
    }
    #screen_shader = $HOME/.config/shaders/grayscale.glsl
}

# Read https://wiki.hyprland.org/Configuring/Dwindle-Layout/ for more info on dwindle layout.
dwindle {
    pseudotile = true
    preserve_split = true
}

# Read https://wiki.hyprland.org/Configuring/Master-Layout/ for more info on master layout.
master {
    mfact = 0.5
}

# We have our own wallpapers :) So I'll disable default things.
misc {
    force_default_wallpaper = 0
    disable_hyprland_logo = true
}
# No need for gestures unless you have a touch display.
#gestures {
#    workspace_swipe = true
#}

gesture = 3, horizontal, workspace



#                                    !!KEYBINDS!!                                   #
# --------------------------------------------------------------------------------- #
#                                    !!KEYBINDS!!                                   #

# My personally preferred keybinds, change as needed.

# Windows key / Super key is the main modifier key. (abbreviated as mod)
$mainMod = SUPER
$scrshot = hyprshot --mode region --output-folder $HOME/Pictures/Screenshots/

# mod + enter = start terminal
bind = $mainMod, Return, exec, $terminal
# mod + z = start browser
bind = $mainMod, z, exec, $browser
# mod + Q = kill current focused application
bind = $mainMod, Q, killactive,
# mod + shift + S = take screenshot of area, MUST HAVE HYPRSHOT INSTALLED!
#bind = $mainMod SHIFT, S, exec, hyprshot --mode region --output-folder /tmp
bind = , print, exec, $scrshot
# mod + E = open file manager (I prefer caja).
bind = $mainMod, E, exec, $fileManager
# mod + shift + space = Toggle focused window to be floating or tiled.
bind = $mainMod SHIFT, SPACE, togglefloating
# mod + F = toggle focused window to full-screen view.
bind = $mainMod, F, fullscreen
# mod + D = toggle application launcher (I prefer wofi).
bind = $mainMod, A, exec, $menu
# wallpapers
# bind = $mainMod, W, exec, $HOME/.config/wofi/scripts/wallpapers.sh
bind = $mainMod, W, exec, waypaper
# power menu
bind = $mainMod, P, exec, $HOME/.config/wofi/scripts/power.sh


# bind = $mainMod, X, exec, $HOME/scripts/projection.sh

bind = $mainMod, D, exec, $HOME/scripts/display_mode_menu.sh


#binde = $mainMod SHIFT, L, resizeactive,50 0
#binde = $mainMod SHIFT, K, resizeactive,0 -50
#binde = $mainMod SHIFT, J, resizeactive,0 50
bind = $mainMod SHIFT, w, exec, killall -SIGUSR1 waybar

bind = $mainMod, l, exec, hyprlock

bind = $mainMod, t, exec, $HOME/scripts/change-theme.sh

# bluelight filter
# Set specific color temperatures
# bind = $mainMod, XF86MonBrightnessDown, exec, busctl --user -- set-property rs.wl-gammarelay / rs.wl.gammarelay Temperature q 4500
# bind = $mainMod, XF86MonBrightnessUp, exec, busctl --user -- set-property rs.wl-gammarelay / rs.wl.gammarelay Temperature q 6500

# Increment/decrement temperature
bind = $mainMod, XF86MonBrightnessDown, exec, busctl --user -- call rs.wl-gammarelay / rs.wl.gammarelay UpdateTemperature n +200
bind = $mainMod, XF86MonBrightnessUp, exec, busctl --user -- call rs.wl-gammarelay / rs.wl.gammarelay UpdateTemperature n -200

bind = $mainMod SHIFT, left, resizeactive,-50 0
bind = $mainMod SHIFT, right, resizeactive,50 0
bind = $mainMod SHIFT, up, resizeactive,0 -50
bind = $mainMod SHIFT, down, resizeactive,0 50

#bind = $mainMod CTRL, H, movewindow, l
#bind = $mainMod CTRL, L, movewindow, r
#bind = $mainMod CTRL, K, movewindow, u
#bind = $mainMod CTRL, J, movewindow, d

bind = $mainMod CTRL, left, movewindow, l
bind = $mainMod CTRL, right, movewindow, r
bind = $mainMod CTRL, up, movewindow, u
bind = $mainMod CTRL, down, movewindow, d


# Move focus with mainMod + arrow keys
bind = $mainMod, left, movefocus, l
bind = $mainMod, right, movefocus, r
bind = $mainMod, up, movefocus, u
bind = $mainMod, down, movefocus, d

#bind = $mainMod, R, submap, fastedit
#submap = fastedit
#bind = CTRL, right, resizeactive, 10 0
#bind = CTRL, left, resizeactive, -10 0
#bind = CTRL, up, resizeactive, 0 -10
#bind= CTRL, down, resizeactive, 0 10
#binde = , left, movefocus, l
#binde = , right, movefocus, r
#binde = , up, movefocus, u
#binde = , down, movefocus, d
#bind = SHIFT, left, movewindow, l
#bind = SHIFT, right, movewindow, r
#bind = SHIFT, up, movewindow, u
#bind = SHIFT, down, movewindow, d
#bind = , escape, submap, reset
#submap = reset

# Switch current workspaces with mainMod + [0-9]
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

# Move a focused window to a workspace with mainMod + SHIFT + [0-9]
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10

# Move and Resize windows with mainMod + LMB/RMB and dragging, drag on edges to resize.
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

# Laptop muldia keys for volume and LCD brightness
bindel = ,XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+
bindel = ,XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindel = ,XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindel = ,XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bindel = ,XF86MonBrightnessUp, exec, brightnessctl s 5%+
bindel = ,XF86MonBrightnessDown, exec, brightnessctl s 5%-
bindl=, XF86AudioPlay, exec, playerctl play-pause
bindl=, XF86AudioNext, exec, playerctl next
bind = $mainMod, N, exec, playerctl next
bind = $mainMod, B, exec, playerctl previous
bindl=, XF86AudioPrev, exec, playerctl previous
bindl = , switch:on:Lid Switch, exec, hyprctl dispatch dpms off
bindl = , switch:off:Lid Switch, exec, hyprctl dispatch dpms on


#                                    !!WINDOW RULES!!                               #
# --------------------------------------------------------------------------------- #
#                                    !!WINDOW RULES!!                               #


# -- Some of my personally preferred window rules, you will probably like these as well! ---%
# -- There's also lots of bug-fixes for specific apps here.                              ---%

# Read https://wiki.hyprland.org/Configuring/Window-Rules/ for more info
# Read https://wiki.hyprland.org/Configuring/Workspace-Rules/  for more info


# I want certain apps to be floating by default when starting them.
# You can copy/paste this force_zero_scalingrmat and add your own preferred applications.
windowrule = tile, class:^(kitty)$
windowrule = float, class:^(waypaper)$
#windowrule = opacity 1.0 override 0.8 override 0.9 override, class:^(spotify)$
# windowrule = opacity 0.5 override 0.5 override 1.0 override, class:spotify
#windowrulev2 = opacity 0.2 0.2,class:^(spotify)$
windowrulev2 = opacity 0.70 0.70,initialTitle:^(Spotify)(.*)$
# windowrulev2 = opacity 0.70 0.70,initialTitle:^(Code)(.*)$


windowrule = float, class:^(org.gnome.Calculator)$
#windowrule = opacity 1 override, class:^(kitty)$
#windowrule = opacity 1 override, class:^(zed$)
## This adds a blur to the background of wofi (our app launcher)
## The reason we can't do this within wofi itself, is because gtk3 doesn't
## have a built-in background blur.
layerrule = noanim, wofi

layerrule = noanim, hyprpicker

 layerrule = noanim, selection
#layerrule = ignorealpha 0.01, wofi # This is so entirely transparent things aren't blurred.
#
## Add blur to waybar, for same reason as above. Since we have two versions
## of the waybar design, one with translucency.
#layerrule = blur, waybar
#layerrule = blurpopups, waybar
#layerrule = ignorealpha 0.01, waybar # this is so entirely transparent things aren't blurred.
#
## Add blur to eww widgets
#layerrule = blur, eww
#layerrule = blurpopups, eww
#layerrule = ignorealpha 0.01, eww
#
## Ignore maximize requests from apps.
#windowrulev2 = suppressevent maximize, class:.*
#
## Certain windows need a minimum-size to not be bugged,
## adding more here as needed.
##windowrulev2 = minsize 250 250, class:^(Unity)$, title:^(Project Settings)$
##windowrulev2 = minsize 250 250, class:^(Unity)$, title:^(Preferences)$
##windowrulev2 = minsize 250 250, class:^(Unity)$, title:^(UnityEditor.AddComponent.AddComponentWindow)$
##windowrulev2 = minsize 250 250, class:^(Unity)$, title:^(Package Manager)$
## windowrulev2 = minsize 250 250, class:^(Unity)$, title:^(UI Toolkit Debugger)$
##windowrulev2 = minsize 250 500, class:^(Unity)$, title:^(Font Asset Creator)$
## windowrulev2 = minsize 500 250, class:^(Unity)$, title:^(Background Tasks)$
#
##windowrulev2 = move cursor, class:^(Unity)$
#
## Color Picker for unity
#windowrulev2 = move cursor, class:^(Unity)$, title:^(Color)$
#windowrulev2 = move cursor, class:^(Unity)$, title:^(HDR Color)$
#
#windowrule = opacity 1.0 override noblur,class:^(firefox)$
## windowrule = opacity 0.3 override blur,title:(.*)(WhatsApp) # windowrule = opacity 1.0 override, firefox
#
## Fix dragging issues with XWayland
#windowrulev2 = nofocus,class:^$,title:^$,xwayland:1,floating:1,fullscreen:0,pinned:0
#
#windowrule = opacity 0.0 override, class:^(xwaylandvideobridge)$
#windowrule = noanim, class:^(xwaylandvideobridge)$
#windowrule = noinitialfocus, class:^(xwaylandvideobridge)$
#windowrule = maxsize 1 1, class:^(xwaylandvideobridge)$
#windowrule = noblur, class:^(xwaylandvideobridge)$
#windowrule = nofocus, class:^(xwaylandvideobridge)$
## exec-once = hyprctl setcursor Adwaita 24
